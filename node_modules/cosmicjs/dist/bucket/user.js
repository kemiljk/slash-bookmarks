"use strict";

var _require = require('../helpers/constants'),
    URI = _require.URI;

var HTTP_METHODS = require('../helpers/http_methods');

var _require2 = require('../helpers/request_handler'),
    requestHandler = _require2.requestHandler;

var headers;

var userMethods = function userMethods(bucket_config) {
  return {
    getUsers: function getUsers() {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/users");

      if (bucket_config.write_key) {
        headers = {
          "Authorization": "Bearer ".concat(bucket_config.write_key)
        };
      }

      return requestHandler(HTTP_METHODS.GET, endpoint, null, headers);
    },
    getUser: function getUser(params) {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/users/").concat(params.id);

      if (bucket_config.write_key) {
        headers = {
          "Authorization": "Bearer ".concat(bucket_config.write_key)
        };
      }

      return requestHandler(HTTP_METHODS.GET, endpoint, null, headers);
    },
    addUser: function addUser(params) {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/users");

      if (bucket_config.write_key) {
        headers = {
          "Authorization": "Bearer ".concat(bucket_config.write_key)
        };
      }

      return requestHandler(HTTP_METHODS.POST, endpoint, params, headers);
    }
  };
};

module.exports = userMethods;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9idWNrZXQvdXNlci5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiVVJJIiwiSFRUUF9NRVRIT0RTIiwicmVxdWVzdEhhbmRsZXIiLCJoZWFkZXJzIiwidXNlck1ldGhvZHMiLCJidWNrZXRfY29uZmlnIiwiZ2V0VXNlcnMiLCJlbmRwb2ludCIsInNsdWciLCJ3cml0ZV9rZXkiLCJHRVQiLCJnZXRVc2VyIiwicGFyYW1zIiwiaWQiLCJhZGRVc2VyIiwiUE9TVCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O2VBQWdCQSxPQUFPLENBQUMsc0JBQUQsQztJQUFmQyxHLFlBQUFBLEc7O0FBQ1IsSUFBTUMsWUFBWSxHQUFHRixPQUFPLENBQUMseUJBQUQsQ0FBNUI7O2dCQUMyQkEsT0FBTyxDQUFDLDRCQUFELEM7SUFBMUJHLGMsYUFBQUEsYzs7QUFDUixJQUFJQyxPQUFKOztBQUVBLElBQU1DLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUNDLGFBQUQ7QUFBQSxTQUFvQjtBQUN0Q0MsSUFBQUEsUUFBUSxFQUFFLG9CQUFNO0FBQ2QsVUFBTUMsUUFBUSxhQUFNUCxHQUFOLGNBQWFLLGFBQWEsQ0FBQ0csSUFBM0IsV0FBZDs7QUFDQSxVQUFJSCxhQUFhLENBQUNJLFNBQWxCLEVBQTZCO0FBQzNCTixRQUFBQSxPQUFPLEdBQUc7QUFDUiw0Q0FBMkJFLGFBQWEsQ0FBQ0ksU0FBekM7QUFEUSxTQUFWO0FBR0Q7O0FBQ0QsYUFBT1AsY0FBYyxDQUFDRCxZQUFZLENBQUNTLEdBQWQsRUFBbUJILFFBQW5CLEVBQTZCLElBQTdCLEVBQW1DSixPQUFuQyxDQUFyQjtBQUNELEtBVHFDO0FBVXRDUSxJQUFBQSxPQUFPLEVBQUUsaUJBQUNDLE1BQUQsRUFBWTtBQUNuQixVQUFNTCxRQUFRLGFBQU1QLEdBQU4sY0FBYUssYUFBYSxDQUFDRyxJQUEzQixvQkFBeUNJLE1BQU0sQ0FBQ0MsRUFBaEQsQ0FBZDs7QUFDQSxVQUFJUixhQUFhLENBQUNJLFNBQWxCLEVBQTZCO0FBQzNCTixRQUFBQSxPQUFPLEdBQUc7QUFDUiw0Q0FBMkJFLGFBQWEsQ0FBQ0ksU0FBekM7QUFEUSxTQUFWO0FBR0Q7O0FBQ0QsYUFBT1AsY0FBYyxDQUFDRCxZQUFZLENBQUNTLEdBQWQsRUFBbUJILFFBQW5CLEVBQTZCLElBQTdCLEVBQW1DSixPQUFuQyxDQUFyQjtBQUNELEtBbEJxQztBQW1CdENXLElBQUFBLE9BQU8sRUFBRSxpQkFBQ0YsTUFBRCxFQUFZO0FBQ25CLFVBQU1MLFFBQVEsYUFBTVAsR0FBTixjQUFhSyxhQUFhLENBQUNHLElBQTNCLFdBQWQ7O0FBQ0EsVUFBSUgsYUFBYSxDQUFDSSxTQUFsQixFQUE2QjtBQUMzQk4sUUFBQUEsT0FBTyxHQUFHO0FBQ1IsNENBQTJCRSxhQUFhLENBQUNJLFNBQXpDO0FBRFEsU0FBVjtBQUdEOztBQUNELGFBQU9QLGNBQWMsQ0FBQ0QsWUFBWSxDQUFDYyxJQUFkLEVBQW9CUixRQUFwQixFQUE4QkssTUFBOUIsRUFBc0NULE9BQXRDLENBQXJCO0FBQ0Q7QUEzQnFDLEdBQXBCO0FBQUEsQ0FBcEI7O0FBOEJBYSxNQUFNLENBQUNDLE9BQVAsR0FBaUJiLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBVUkkgfSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvY29uc3RhbnRzJylcbmNvbnN0IEhUVFBfTUVUSE9EUyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaHR0cF9tZXRob2RzJylcbmNvbnN0IHsgcmVxdWVzdEhhbmRsZXIgfSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcmVxdWVzdF9oYW5kbGVyJylcbmxldCBoZWFkZXJzO1xuXG5jb25zdCB1c2VyTWV0aG9kcyA9IChidWNrZXRfY29uZmlnKSA9PiAoe1xuICBnZXRVc2VyczogKCkgPT4ge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7VVJJfS8ke2J1Y2tldF9jb25maWcuc2x1Z30vdXNlcnNgXG4gICAgaWYgKGJ1Y2tldF9jb25maWcud3JpdGVfa2V5KSB7XG4gICAgICBoZWFkZXJzID0ge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke2J1Y2tldF9jb25maWcud3JpdGVfa2V5fWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcXVlc3RIYW5kbGVyKEhUVFBfTUVUSE9EUy5HRVQsIGVuZHBvaW50LCBudWxsLCBoZWFkZXJzKVxuICB9LFxuICBnZXRVc2VyOiAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBgJHtVUkl9LyR7YnVja2V0X2NvbmZpZy5zbHVnfS91c2Vycy8ke3BhcmFtcy5pZH1gXG4gICAgaWYgKGJ1Y2tldF9jb25maWcud3JpdGVfa2V5KSB7XG4gICAgICBoZWFkZXJzID0ge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke2J1Y2tldF9jb25maWcud3JpdGVfa2V5fWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcXVlc3RIYW5kbGVyKEhUVFBfTUVUSE9EUy5HRVQsIGVuZHBvaW50LCBudWxsLCBoZWFkZXJzKVxuICB9LFxuICBhZGRVc2VyOiAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBgJHtVUkl9LyR7YnVja2V0X2NvbmZpZy5zbHVnfS91c2Vyc2BcbiAgICBpZiAoYnVja2V0X2NvbmZpZy53cml0ZV9rZXkpIHtcbiAgICAgIGhlYWRlcnMgPSB7XG4gICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBgQmVhcmVyICR7YnVja2V0X2NvbmZpZy53cml0ZV9rZXl9YFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVxdWVzdEhhbmRsZXIoSFRUUF9NRVRIT0RTLlBPU1QsIGVuZHBvaW50LCBwYXJhbXMsIGhlYWRlcnMpXG4gIH1cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlck1ldGhvZHNcbiJdfQ==